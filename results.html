<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>8values</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>8values</h1>
<hr>

<h1>Results</h1>

<h2>Economic Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
    <img src="value_images/equality.svg" height="128pt"/>
    <div class="bar equality" id="bar-equality"><div class="text-wrapper" id="equality"></div></div>
    <div class="bar wealth" id="bar-wealth"><div class="text-wrapper" id="wealth"></div></div>
    <img src="value_images/wealth.svg" height="128pt"/>
</div>
<h2>Diplomatic Axis: <span class="weight-300" id="diplomatic-label"></span></h2>
<div class="axis">
    <img src="value_images/might.svg" height="128pt"/>
    <div class="bar might" id="bar-might"><div class="text-wrapper" id="might"></div></div>
    <div class="bar peace" id="bar-peace"><div class="text-wrapper" id="peace"></div></div>
    <img src="value_images/peace.svg" height="128pt"/>
</div>
<h2>State Axis: <span class="weight-300" id="state-label"></span></h2>
<div class="axis">
    <img src="value_images/liberty.svg" height="128pt"/>
    <div class="bar liberty" id="bar-liberty"><div class="text-wrapper" id="liberty"></div></div>
    <div class="bar authority" id="bar-authority"><div class="text-wrapper" id="authority"></div></div>
    <img src="value_images/authority.svg" height="128pt"/>
</div>
<h2>Society Axis: <span class="weight-300" id="society-label"></span></h2>
<div class="axis">
    <img src="value_images/tradition.svg" height="128pt"/>
    <div class="bar tradition" id="bar-tradition"><div class="text-wrapper" id="tradition"></div></div>
    <div class="bar progress" id="bar-progress"><div class="text-wrapper" id="progress"></div></div>
    <img src="value_images/progress.svg" height="128pt"/>
</div>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Ideological matching is a work in progress, and is much less accurate than the values and axes. If you disagree with your matched ideology, send us an email with your scores, marched ideology, and preferred ideology, and we'll look into adjusting the system. Thanks!</p>
<hr/>
<p>You can send these results by copying and pasting the URL at the top of the page. Want to help us calibrate the test? Send the results along with your political ideology to us at eightvalues@gmail.com, or send us any comments, questions, or criticism.
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    econArray = ["Communist","Socialist","Egalitarian","Centrist","Market","Capitalist","Laissez-Faire"]
    diplArray = ["Ultra-Pacifist","Pacifist","Dovish","Balanced","Hawkish","Militarist","Ultra-Militarist"]
    govtArray = ["Anarchist","Libertarian","Liberal","Moderate","Statist","Authoritarian","Totalitarian"]
    sctyArray = ["Revolutionary","Very Progressive","Progressive","Neutral","Traditional","Very Traditional","Reactionary"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    equality  = getQueryVariable("e")
    peace     = getQueryVariable("d")
    liberty   = getQueryVariable("g")
    progress  = getQueryVariable("s")
    wealth    = (100 - equality).toFixed(1)
    might     = (100 - peace   ).toFixed(1)
    authority = (100 - liberty ).toFixed(1)
    tradition = (100 - progress).toFixed(1)

    setBarValue("equality", equality)
    setBarValue("wealth", wealth)
    setBarValue("peace", peace)
    setBarValue("might", might)
    setBarValue("liberty", liberty)
    setBarValue("authority", authority)
    setBarValue("progress", progress)
    setBarValue("tradition", tradition)

    document.getElementById("economic-label").innerHTML = setLabel(equality, econArray)
    document.getElementById("diplomatic-label").innerHTML = setLabel(peace, diplArray)
    document.getElementById("state-label").innerHTML = setLabel(liberty, govtArray)
    document.getElementById("society-label").innerHTML = setLabel(progress, sctyArray)

    ideology = ""
    ideodist = 30000
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(ideologies[i].stats.econ - equality, 2)
        dist += Math.pow(ideologies[i].stats.govt - liberty, 2)
        dist += Math.pow(ideologies[i].stats.dipl - peace, 2)/3
        dist += Math.pow(ideologies[i].stats.scty - progress, 2)/2
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology
    </script>
</body>
